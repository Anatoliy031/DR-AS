<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>–ê–∫—Ç –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞ ‚Äî –°–µ–º–µ–π–∫–∏–Ω –ê–Ω—Ç–æ–Ω –Æ—Ä—å–µ–≤–∏—á</title>

<!-- –®—Ä–∏—Ñ—Ç—ã -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-1:#060914;
    --bg-2:#0a1024;
    --card:#0f172aee;
    --border:#3b82f6;
    --accent:#22d3ee;
    --text:#e5e7eb;
    --muted:#94a3b8;
    --ok:#22c55e;
    --warn:#f59e0b;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 70% -10%, #1b2556 0%, transparent 60%),
      radial-gradient(900px 500px at -10% 10%, #0d1b47 0%, transparent 55%),
      linear-gradient(180deg,var(--bg-1),var(--bg-2));
    overflow-x:hidden;
  }

  /* –ó–≤—ë–∑–¥–Ω–∞—è –ø—ã–ª—å */
  .stars,.stars2{
    position:fixed;inset:0;pointer-events:none;z-index:0;
    background-repeat:repeat;
    background-image:radial-gradient(2px 2px at 20px 30px,#ffffff66 50%,transparent 51%),
                     radial-gradient(1px 1px at 130px 80px,#ffffff4d 50%,transparent 51%),
                     radial-gradient(2px 2px at 200px 120px,#ffffff40 50%,transparent 51%),
                     radial-gradient(1px 1px at 80px 200px,#ffffff33 50%,transparent 51%);
    animation: drift 140s linear infinite;
    opacity:.35;
  }
  .stars2{ animation-duration: 220s; opacity:.2; filter: blur(0.3px); }
  @keyframes drift{ from{background-position:0 0,0 0,0 0,0 0} to{background-position:1000px 400px,800px 600px,1200px 900px,600px 1200px} }

  /* –•–æ–ª—Å—Ç —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–æ–≤ */
  #fw{ position:fixed; inset:0; z-index:1; pointer-events:none; }

  /* –ö–∞—Ä—Ç–æ—á–∫–∞ */
  .wrap{position:relative; z-index:2; display:flex; align-items:center; justify-content:center; min-height:100vh; padding:16px;}
  .card{
    width:min(920px,100%);
    backdrop-filter:saturate(140%) blur(8px);
    background:linear-gradient(180deg, rgba(17,24,39,0.85), rgba(15,23,42,0.92));
    border:1px solid #334155;
    border-radius:18px;
    box-shadow:0 20px 60px #00000070, inset 0 0 0 1px #ffffff0a;
    overflow:hidden;
  }
  .hdr{
    padding:22px 20px 16px;
    background:
      linear-gradient(180deg, #0ea5e980 0%, #3b82f680 100%),
      linear-gradient(180deg, #0b1226 0%, #0b1226 100%);
    border-bottom:1px solid #1f2a44;
  }
  .badge{
    display:inline-block; padding:6px 10px; font-size:12px; letter-spacing:.08em; text-transform:uppercase;
    border:1px solid #60a5fa; border-radius:999px; color:#e0f2fe; background:#0b1836cc;
  }
  h1{
    margin:10px 0 0; font-size:clamp(20px,4.5vw,30px); line-height:1.2; font-weight:900;
    letter-spacing:.02em; color:#eaf2ff;
    text-shadow:0 0 18px #1e40af66, 0 0 2px #000;
  }
  .sub{ margin-top:6px; color:#c7d2fe; font-size:14px }
  .content{ padding:18px 18px 24px; }

  .pair{ display:grid; grid-template-columns:1fr; gap:10px; margin:14px 0 8px }
  .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
  .kv{ padding:10px 12px; border:1px solid #27334f; border-radius:12px; background:#0b1220aa; color:#cbd5e1; font-size:14px }

  h2{ margin:18px 0 8px; font-size:18px; color:#e2e8f0; border-left:3px solid #38bdf8; padding-left:10px }
  ul{ margin:8px 0 14px 0; padding-left:18px }
  li{ margin:6px 0; line-height:1.5 }
  .ok{ color:var(--ok); font-weight:600 }
  .muted{ color:var(--muted) }

  .footer{
    padding:14px 18px 20px; border-top:1px solid #1f2a44; background:linear-gradient(180deg,#0b1226,#0b1226d9);
    display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between;
  }
  .sig{ font-size:14px; color:#cbd5e1 }
  .script{
    font-family:"Dancing Script",cursive; font-size:clamp(28px,8vw,44px);
    color:#fff; text-shadow:0 4px 30px #ef444399, 0 2px 8px #000a; letter-spacing:.5px
  }

  /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
  .controls{
    position:fixed; right:12px; bottom:12px; z-index:3; display:flex; gap:10px; flex-direction:column;
  }
  .btn{
    appearance:none; border:none; cursor:pointer;
    padding:10px 12px; border-radius:12px; font-weight:600; color:#0b1220;
    background:#e2e8f0; box-shadow:0 6px 16px #00000040; transition: transform .15s ease, filter .2s;
  }
  .btn:active{ transform: translateY(1px) }
  .btn.sec{ background:#93c5fd; }
  .btn.ghost{ background:#0b1220cc; color:#e2e8f0; border:1px solid #334155 }

  /* –ü–ª–∞—à–∫–∞ –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ */
  .unmute{
    position:fixed; inset:auto 12px 12px 12px; z-index:4;
    display:none; align-items:center; gap:10px;
    padding:12px 14px; border-radius:14px; background:#0b1220f2; border:1px solid #334155; color:#e2e8f0;
    box-shadow:0 10px 30px #0008;
  }
  .unmute.show{ display:flex; animation: pop .18s ease }
  @keyframes pop{ from{transform:scale(.96); opacity:.5} to{transform:scale(1); opacity:1} }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏ */
  .type-line{ border-right:2px solid #60a5fa; white-space:pre-wrap }
  .typed{ border-right:none }

  @media (min-width:640px){
    .pair{ grid-template-columns:repeat(2,minmax(0,1fr)); }
  }
</style>
</head>
<body>

<div class="stars"></div>
<div class="stars2"></div>
<canvas id="fw"></canvas>

<div class="wrap">
  <article class="card" id="card">
    <header class="hdr">
      <span class="badge">–ê–ö–¢ –≤–Ω–µ–ø–ª–∞–Ω–æ–≤–æ–≥–æ –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞</span>
      <h1 class="type-line" data-text="¬´–°–µ–º–µ–π–∫–∏–Ω –ê–Ω—Ç–æ–Ω –Æ—Ä—å–µ–≤–∏—á¬ª ‚Ññ 001 –æ—Ç 26.09.2025"></h1>
      <div class="sub type-line" data-text="–û—Å–Ω–æ–≤–∞–Ω–∏–µ: –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è ¬´–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è¬ª."></div>
    </header>

    <div class="content">
      <div class="pair">
        <div class="kv type-line" data-text="–ú–µ—Å—Ç–æ: –≥. –ú–æ—Å–∫–≤–∞"></div>
        <div class="kv type-line" data-text="–ö–æ–º–∏—Å—Å–∏—è: –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å ‚Äî –ê–±—É—Å–∞–ª–∏–º–æ–≤ –ê–Ω–∞—Ç–æ–ª–∏–π –õ–∞—á–∏–Ω–æ–≤–∏—á; —á–ª–µ–Ω—ã —Å–µ–º—å–∏ (–ø–æ —Å–ø–∏—Å–∫—É)."></div>
      </div>

      <p class="type-line" data-text="–¶–µ–ª—å: –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –û–±—ä–µ–∫—Ç–∞ –∫ –æ—á–µ—Ä–µ–¥–Ω–æ–º—É –≥–æ–¥—É –∑–¥–æ—Ä–æ–≤—å—è, –≤–µ—Å–µ–ª—å—è –∏ –ø–æ–±–µ–¥."></p>
      <p class="type-line" data-text="–ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä, —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç —Ç–æ—Å—Ç–∞–º–∏, –¥–µ–≥—É—Å—Ç–∞—Ü–∏—è, –∑–∞–º–µ—Ä —É—Ä–æ–≤–Ω—è —Å—á–∞—Å—Ç—å—è, –¥–∏–∞–ª–æ–≥ —à—É—Ç–∫–∞–º–∏."></p>

      <h2>1. –•–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ—Å–Ω–æ–≤–Ω—ã–µ —É–∑–ª—ã)</h2>
      <ul id="sec1">
        <li class="type-line" data-text="–ù–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚Äî —Å—Ç–∞–ª—å, —É–ª—ã–±–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–º —Ä–∞—Å–∫–ª–∞–¥–µ. ‚úÖ"></li>
        <li class="type-line" data-text="–ö–æ–º–∞–Ω–¥–Ω—ã–π –¥—É—Ö ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –≤—ã—à–µ –ø–ª–∞–Ω–∫–∏. ‚úÖ"></li>
        <li class="type-line" data-text="–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ. ‚úÖ"></li>
        <li class="type-line" data-text="–ú–æ–¥—É–ª—å —Å–∞–º–æ–∏—Ä–æ–Ω–∏–∏ ‚Äî –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –æ—Ç–≤–µ—á–∞–µ—Ç —à—É—Ç–∫–æ–π –Ω–∞ —à—É—Ç–∫—É. ‚úÖ"></li>
        <li class="type-line" data-text="–ó–æ–ª–æ—Ç–æ–¥–æ–±—ã–≤–∞—é—â–∏–π –∫–æ–Ω—Ç—É—Ä ‚Äî –æ—Ç–ª–∞–∂–µ–Ω: –Ω–∏ –æ–¥–Ω–∞ –∑–æ–ª–æ—Ç–∞—è –ø—ã–ª–∏–Ω–∫–∞ –ø—Ä–∏ –¥–æ–±—ã—á–µ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è; –ø–æ—Ç–µ—Ä–∏ Au ‚Äî 0,0 –≥ (–Ω–æ—Ä–º–∞: 0,0 –≥). ‚úÖ"></li>
      </ul>

      <h2>2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π</h2>
      <ul id="sec2">
        <li class="type-line" data-text="KPI —Å—á–∞—Å—Ç—å—è ‚Äî 100%."></li>
        <li class="type-line" data-text="–ó–∞–ø–∞—Å –∑–¥–æ—Ä–æ–≤—å—è ‚Äî –ø–æ–ª–Ω—ã–π –±–∞–∫."></li>
        <li class="type-line" data-text="–ü–ª–∞–Ω—ã ‚Äî –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã –∏ —Ä–µ–∞–ª–∏–∑—É–µ–º—ã."></li>
        <li class="type-line" data-text="–£—Ä–æ–≤–µ–Ω—å —Ö–∞—Ä–∏–∑–º—ã ‚Äî –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π."></li>
      </ul>

      <h2>3. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏</h2>
      <ul id="sec3">
        <li class="type-line" data-text="–°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–∂–µ –ø—Ä–∞–∑–¥–Ω—É—é—Ç ‚Äî —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏–µ–º –¥–æ–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞."></li>
        <li class="type-line" data-text="–•—Ä–æ–Ω–∏—á–µ—Å–∫–æ–µ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–º–µ—Ö–æ–º –∏ —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º."></li>
        <li class="type-line" data-text="–ù–µ–¥–æ–±–æ—Ä –æ—Ç–ø—É—Å–∫–æ–≤ ‚Äî –∑–∞–∫—Ä—ã—Ç—å –¥–æ –∫–æ–Ω—Ü–∞ –≥–æ–¥–∞."></li>
      </ul>

      <h2>4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏</h2>
      <ul id="sec4">
        <li class="type-line" data-text="–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–æ–±—ã–≤–∞—Ç—å –∑–æ–ª–æ—Ç–æ –∏–∑ –ª—é–±—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π: –≤—Å—ë, —á—Ç–æ –±–ª–µ—Å—Ç–∏—Ç ‚Äî –≤ —Å–ª–∏—Ç–∫–∏ ¬´–∑–¥–æ—Ä–æ–≤—å–µ/–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏/–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª—é–¥–∏/–¥–µ–Ω—å–∂–∞—Ç–∞ üòâ¬ª."></li>
        <li class="type-line" data-text="–ü—Ä–µ–º–∏–∏ ‚Äî –µ–∂–µ–º–µ—Å—è—á–Ω–æ, –æ—Ç—á—ë—Ç—ã ‚Äî —Ä–∞–∑ –≤ –ø—è—Ç–∏–ª–µ—Ç–∫—É üòÇ."></li>
        <li class="type-line" data-text="–†–µ–∂–∏–º –Ω–∞ –≥–æ–¥ ‚Äî –∫–∞–π—Ñ–æ–≤–∞—Ç—å –æ—Ç –≤—Å–µ–≥–æ –∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ñ–æ—Ç–æ—á–∫–∏."></li>
      </ul>

      <p class="type-line" data-text="–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û–±—ä–µ–∫—Ç ¬´–°–µ–º–µ–π–∫–∏–Ω –ê. –Æ.¬ª –ø—Ä–∏–∑–Ω–∞–Ω —ç—Ç–∞–ª–æ–Ω–Ω—ã–º –∏ –≥–æ–¥–Ω—ã–º –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ —Ä–µ–∂–∏–º–µ ¬´–°—á–∞—Å—Ç—å–µ √ó100¬ª."></p>

      <div class="pair" style="margin-top:8px">
        <div class="kv type-line" data-text="–ü–æ–¥–ø–∏—Å–∏: –ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å ‚Äî –ê–±—É—Å–∞–ª–∏–º–æ–≤ –ê–Ω–∞—Ç–æ–ª–∏–π –õ–∞—á–∏–Ω–æ–≤–∏—á /–¢–æ–ª—è–Ω/"></div>
        <div class="kv type-line" data-text="–ß–ª–µ–Ω—ã –∫–æ–º–∏—Å—Å–∏–∏: –ê–±—É—Å–∞–ª–∏–º–æ–≤–∞ –ò—Ä–∏–Ω–∞ –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞ /–ò—Ä–∏—à–∫–∞/; –ê–±—É—Å–∞–ª–∏–º–æ–≤–∞ –ê—Ä–∏–Ω–∞ –ê–Ω–∞—Ç–æ–ª—å–µ–≤–Ω–∞ /–ê—Ä–∏—à–∫–∞/"></div>
      </div>
    </div>

    <footer class="footer">
      <div class="sig script">–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –±—Ä–∞—Ç—É–ª–µ—Ü! üéâ</div>
      <div class="row">
        <button class="btn ghost" id="skip">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É</button>
        <button class="btn sec" id="muteBtn">üîä –ó–≤—É–∫</button>
      </div>
    </footer>
  </article>
</div>

<!-- –ü–ª–∞—à–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ (–µ—Å–ª–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω) -->
<div class="unmute" id="unmute">
  <span>üîà –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫?</span>
  <button class="btn sec" id="unmuteBtn">–í–∫–ª—é—á–∏—Ç—å</button>
</div>

<audio id="bgm" src="music.mp3" preload="auto" loop></audio>

<script>
/* ====== –ü–ª–∞–≤–Ω–∞—è –ø–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ ====== */
(function(){
  const SPEED = 16;       // —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏ (–º—Å –∑–∞ —Å–∏–º–≤–æ–ª)
  const PAUSE = 250;      // –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏
  const lines = Array.from(document.querySelectorAll('.type-line'));
  let stopTyping = false;

  function typeOne(el, text){
    return new Promise(resolve=>{
      el.textContent = '';
      let i = 0;
      const tick = () => {
        if(stopTyping){ el.textContent = text; el.classList.add('typed'); return resolve(); }
        if(i < text.length){
          el.textContent += text[i++];
          setTimeout(tick, SPEED);
        }else{
          el.classList.add('typed');
          setTimeout(resolve, PAUSE);
        }
      };
      tick();
    });
  }

  async function run(){
    for(const el of lines){
      const t = el.dataset.text || el.textContent;
      await typeOne(el, t);
    }
  }

  // –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É"
  document.getElementById('skip').addEventListener('click', ()=>{
    stopTyping = true;
    lines.forEach(el => {
      el.textContent = el.dataset.text || el.textContent;
      el.classList.add('typed');
    });
  });

  // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä—É–∑–∏–ª–∏—Å—å —à—Ä–∏—Ñ—Ç—ã
  setTimeout(run, 500);
})();

/* ====== –ú—É–∑—ã–∫–∞: –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ====== */
(function(){
  const audio = document.getElementById('bgm');
  const muteBtn = document.getElementById('muteBtn');
  const unmute = document.getElementById('unmute');
  const unmuteBtn = document.getElementById('unmuteBtn');

  let muted = false;

  async function tryPlay(){
    try{
      audio.volume = 0;
      await audio.play();
      // –ø–ª–∞–≤–Ω—ã–π —Ñ–µ–π–¥-–∏–Ω
      let v = 0;
      const step = () => {
        v += 0.02;
        audio.volume = Math.min(0.6, v);
        if(v < 0.6 && !audio.paused) requestAnimationFrame(step);
      };
      requestAnimationFrame(step);
      unmute.classList.remove('show');
    }catch(e){
      // —Ç—Ä–µ–±—É–µ—Ç—Å—è –∂–µ—Å—Ç
      unmute.classList.add('show');
    }
  }

  function toggleMute(){
    if(audio.muted || audio.volume === 0){
      audio.muted = false;
      audio.volume = 0.6;
      muted = false;
      muteBtn.textContent = 'üîä –ó–≤—É–∫';
    }else{
      audio.muted = true;
      muted = true;
      muteBtn.textContent = 'üîá –ë–µ–∑ –∑–≤—É–∫–∞';
    }
  }

  muteBtn.addEventListener('click', toggleMute);
  unmuteBtn.addEventListener('click', async ()=>{
    unmute.classList.remove('show');
    await audio.play();
    audio.muted = false; audio.volume = 0.6;
  });

  // –°—Ç–∞—Ä—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  window.addEventListener('load', tryPlay, {once:true});
})();

/* ====== –§–µ–π–µ—Ä–≤–µ—Ä–∫–∏ –Ω–∞ canvas ====== */
(function(){
  const canvas = document.getElementById('fw');
  const ctx = canvas.getContext('2d');
  let w, h, dpr;
  function resize(){
    dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    w = canvas.width = Math.floor(innerWidth * dpr);
    h = canvas.height = Math.floor(innerHeight * dpr);
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
  }
  addEventListener('resize', resize); resize();

  const rand = (min,max)=>Math.random()*(max-min)+min;
  const TAU = Math.PI*2;

  const rockets = [];
  const sparks = [];

  function hueColor(){
    const h = Math.floor(rand(0,360));
    return `hsl(${h} 100% 60%)`;
  }

  function launch(x=rand(0.15*w,0.85*w)){
    rockets.push({
      x, y:h+20, vx:rand(-0.6,0.6), vy:rand(-11.5,-9.5),
      color:hueColor(), life:0, explodeY:rand(0.25*h,0.45*h)
    });
  }

  function explode(x,y,color){
    const n = Math.floor(rand(60,90));
    for(let i=0;i<n;i++){
      const ang = rand(0,TAU);
      const spd = rand(2.5,5.2);
      sparks.push({
        x, y,
        vx: Math.cos(ang)*spd,
        vy: Math.sin(ang)*spd,
        alpha:1,
        color,
        size: rand(1.5,2.4),
        gravity:0.035*dpr,
        friction:0.995,
        flicker: Math.random()<.2
      });
    }
  }

  let last = 0, acc = 0;
  function tick(ts){
    const dt = Math.min(32, ts - last); last = ts; acc += dt;
    // —Ñ–æ–Ω–æ–≤–∞—è –¥—ã–º–∫–∞
    ctx.globalCompositeOperation='destination-out';
    ctx.fillStyle='rgba(0,0,0,0.18)';
    ctx.fillRect(0,0,w,h);
    ctx.globalCompositeOperation='lighter';

    // —Ä–∞–∫–µ—Ç—ã
    for(let i=rockets.length-1;i>=0;i--){
      const r = rockets[i];
      r.life += dt;
      r.vy += 0.012*dpr;
      r.x += r.vx*dpr;
      r.y += r.vy*dpr;

      // —Å–ª–µ–¥
      ctx.beginPath();
      ctx.arc(r.x, r.y, 2.2*dpr, 0, TAU);
      ctx.fillStyle = r.color;
      ctx.fill();

      if(r.y <= r.explodeY || r.vy>0){
        explode(r.x,r.y,r.color);
        rockets.splice(i,1);
      }
    }

    // –∏—Å–∫—Ä—ã
    for(let i=sparks.length-1;i>=0;i--){
      const p = sparks[i];
      p.vx *= p.friction;
      p.vy = p.vy*p.friction + p.gravity;
      p.x += p.vx*dpr;
      p.y += p.vy*dpr;
      p.alpha *= 0.985;

      if(p.alpha<=0.02 || p.y>h+10){ sparks.splice(i,1); continue; }

      ctx.globalAlpha = p.alpha;
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, TAU);
      ctx.fill();

      if(p.flicker && Math.random()<0.1){
        ctx.beginPath();
        ctx.arc(p.x+rand(-1,1), p.y+rand(-1,1), p.size*0.6, 0, TAU);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
    }

    // –∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 700-1000–º—Å
    if(acc>rand(700,1000)){
      acc = 0;
      launch();
      if(Math.random()<0.35) launch(rand(0.15*w,0.85*w));
    }

    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  // –∑–∞–ø—É—Å–∫ –ø–æ —Ç–∞–ø—É
  addEventListener('pointerdown', (e)=>{
    const x = (e.clientX || innerWidth/2) * (w/innerWidth);
    const y = (e.clientY || innerHeight/2) * (h/innerHeight);
    explode(x,y,hueColor());
  }, {passive:true});
})();
</script>
</body>
</html>
